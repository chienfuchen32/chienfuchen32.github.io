<!doctype html><html lang=en-us><head><meta charset=utf-8><meta content="Algorithm,Data Structure" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta property="og:title" content="Least Recently Used  Cache"><meta property="og:description" content="Purpose TODO
Example from LeetCode 146. LRU Cache problem link
Implementation TODO commemt
class Node: def __init__(self, key, value, prev=None, nxt=None): self.key = key self.value = value self.prev = prev self.next = nxt class DoubleLinkList: def __init__(self): self.head = None self.tail = None self.length = 0 def add_node_to_tail(self, node: Node) -> None: self.length += 1 if self.head is None: self.head = node return if self.tail is None: self.tail = node self."><meta property="og:type" content="article"><meta property="og:url" content="https://chienfuchen32.github.io/posts/least-recently-used--cache/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-31T20:10:53+08:00"><meta property="article:modified_time" content="2023-05-31T20:10:53+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Least Recently Used  Cache"><meta name=twitter:description content="Purpose TODO
Example from LeetCode 146. LRU Cache problem link
Implementation TODO commemt
class Node: def __init__(self, key, value, prev=None, nxt=None): self.key = key self.value = value self.prev = prev self.next = nxt class DoubleLinkList: def __init__(self): self.head = None self.tail = None self.length = 0 def add_node_to_tail(self, node: Node) -> None: self.length += 1 if self.head is None: self.head = node return if self.tail is None: self.tail = node self."><title>Least Recently Used Cache &#183; Jeffâ€™s note</title><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css integrity=sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx rel=stylesheet><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css rel=stylesheet></head><body class="d-flex flex-column"><div class="container flex-fill"><header><div class=row><div class=col><nav class="d-flex justify-content-center my-3"><ul class="nav nav-pills"><li class=nav-item><a href=/about/ class=nav-link>About</a></li><li class=nav-item><a href=/posts/ class="nav-link active">Posts</a></li><li class=nav-item><a href=/tags/ class=nav-link>Tags</a></li></ul></nav></div></div></header><main><article><header><div class="justify-content-center row"><div class="col col-auto text-center"><div style=max-width:100ch><h1 class="display-5 fw-bold">Least Recently Used Cache</h1><p class=text-muted><time datetime=2023-05-31>May 31, 2023</time></p></div></div></div></header><div class="justify-content-center row"><div class="col col-auto"><div style=max-width:66ch><h2 id=purpose>Purpose</h2><p>TODO</p><h2 id=example-from-leetcode-146-lru-cache>Example from LeetCode 146. LRU Cache</h2><p><a href=https://leetcode.com/problems/lru-cache/>problem link</a></p><h3 id=implementation>Implementation</h3><p>TODO commemt</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3><span style=display:flex><span><span style=color:#00f>class</span> <span style=color:#2b91af>Node</span>:
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> __init__(self, key, value, prev=<span style=color:#00f>None</span>, nxt=<span style=color:#00f>None</span>):
</span></span><span style=display:flex><span>        self.key = key
</span></span><span style=display:flex><span>        self.value = value
</span></span><span style=display:flex><span>        self.prev = prev
</span></span><span style=display:flex><span>        self.next = nxt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>class</span> <span style=color:#2b91af>DoubleLinkList</span>:
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> __init__(self):
</span></span><span style=display:flex><span>        self.head = <span style=color:#00f>None</span>
</span></span><span style=display:flex><span>        self.tail = <span style=color:#00f>None</span>
</span></span><span style=display:flex><span>        self.length = 0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> add_node_to_tail(self, node: Node) -&gt; <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>        self.length += 1
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.head <span style=color:#00f>is</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            self.head = node
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span> 
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.tail <span style=color:#00f>is</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            self.tail = node
</span></span><span style=display:flex><span>            self.tail.prev = self.head
</span></span><span style=display:flex><span>            self.head.next = self.tail
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>        self.tail.next = node
</span></span><span style=display:flex><span>        node.prev = self.tail
</span></span><span style=display:flex><span>        self.tail = node
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> remove_node_from_head(self) -&gt; int:
</span></span><span style=display:flex><span>        self.length -= 1
</span></span><span style=display:flex><span>        old_key = self.head.key
</span></span><span style=display:flex><span>        self.head = self.head.next
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.head <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            self.head.prev = <span style=color:#00f>None</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span> old_key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> remove_node_from_node(self, node) -&gt; <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>        self.length -= 1
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> node.prev <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            node.prev.next = node.next
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> node.next <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            node.next.prev = node.prev
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> node == self.tail:
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> self.tail.prev <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>                self.tail.prev.next = <span style=color:#00f>None</span>
</span></span><span style=display:flex><span>            self.tail = self.tail.prev
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> node == self.head:
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> self.head.next <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>                self.head.next.prev = <span style=color:#00f>None</span>
</span></span><span style=display:flex><span>            self.head = self.head.next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> print_all_node(self) -&gt; <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>        ptr = self.head
</span></span><span style=display:flex><span>        <span style=color:#00f>while</span> ptr <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            ptr = ptr.next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>class</span> <span style=color:#2b91af>LRUCache</span>:
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> __init__(self, capacity: int):
</span></span><span style=display:flex><span>        self.cache = {} <span style=color:green># {key: Node}</span>
</span></span><span style=display:flex><span>        self.link_list = DoubleLinkList()
</span></span><span style=display:flex><span>        self.capacity = capacity
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> get(self, key: int) -&gt; int:
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.cache.get(key, <span style=color:#00f>None</span>) <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            node = self.cache[key]
</span></span><span style=display:flex><span>            value = node.value
</span></span><span style=display:flex><span>            new_node = Node(key, value)
</span></span><span style=display:flex><span>            self.link_list.remove_node_from_node(node)
</span></span><span style=display:flex><span>            self.cache[key] = new_node
</span></span><span style=display:flex><span>            self.link_list.add_node_to_tail(new_node)
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span> value
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span> -1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>def</span> put(self, key: int, value: int) -&gt; <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.cache.get(key, <span style=color:#00f>None</span>) <span style=color:#00f>is</span> <span style=color:#00f>not</span> <span style=color:#00f>None</span>:
</span></span><span style=display:flex><span>            node = self.cache[key]
</span></span><span style=display:flex><span>            <span style=color:#00f>del</span> self.cache[key]
</span></span><span style=display:flex><span>            self.link_list.remove_node_from_node(node)
</span></span><span style=display:flex><span>        <span style=color:#00f>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> self.link_list.length &gt;= self.capacity:
</span></span><span style=display:flex><span>                head_key = self.link_list.remove_node_from_head()
</span></span><span style=display:flex><span>                <span style=color:#00f>del</span> self.cache[head_key]
</span></span><span style=display:flex><span>        new_node = Node(key, value)
</span></span><span style=display:flex><span>        self.cache[key] = new_node
</span></span><span style=display:flex><span>        self.link_list.add_node_to_tail(new_node)
</span></span></code></pre></div></div></div></div></article></main></div><script crossorigin=anonymous integrity=sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa src=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LR5QZYBPT2"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LR5QZYBPT2",{anonymize_ip:!1})}</script></body></html>