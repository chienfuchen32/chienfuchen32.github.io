<!doctype html><html lang=en-us><head><meta charset=utf-8><meta content="Jeff’s note" name=apple-mobile-web-app-title><meta content="Continuous Deployment,Continuous Integration,DevOps,IaC,SRE" name=keywords><meta content="#0d6efd" name=theme-color><meta content="width=device-width,initial-scale=1" name=viewport><meta property="og:url" content="https://chienfuchen32.github.io/posts/infrastructure-as-code/"><meta property="og:site_name" content="Jeff's note"><meta property="og:title" content="Terraform, Infrastructure as Code management tool"><meta property="og:description" content='IaC Concept fast deployment for business requirement infrastructure consistency security compliance automation Azure cloud infra architecture overview https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/aks-microservices/aks-microservices Proposed GitOps flow change request stakeholder notification, plan IaC modularization for reusable purpose version control, branch: main, dev, new_net, new_db, stg, prd, … automating testing continuous deployment update process to related notificatition channel HCL Code example variable "aks_node_pool" { description = "" type = map(object({ vm_size = string node_count = number zones = list(string) os_disk_size_gb = number os_disk_type = string })) default = { "mqpool" : { vm_size = "Standard_DS4_v2", node_count = 6, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbcorepool" : { vm_size = "Standard_DS3_v2", node_count = 3, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbrepool" : { vm_size = "Standard_DS3_v2", node_count = 25, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbtranspool" : { vm_size = "Standard_DS3_v2", node_count = 12, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbjspool" : { vm_size = "Standard_DS2_v2", node_count = 6, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } } } module "aks" { source = "../../modules/azure/kubernetes" resource_group = var.resource_group location = var.location vnet_app_name = local.vnet_app_name subnet_aks_name = var.subnet_aks_name aks_name = local.aks_name aks_namespace_admin_group_object_ids = var.aks_namespace_admin_group_object_ids aks_admin_group_object_ids = var.aks_admin_group_object_ids apg_id = module.apg.apg_id acr_id = module.acr.acr_id aks_tags = var.aks_tags aks_default_node_pool = var.aks_default_node_pool aks_node_pool = var.aks_node_pool vnet_depends_on = [ module.network.vnet_app_name, module.apg.apg_id, module.acr.acr_id ] } for more detail, please check: https://github.com/chienfuchen32/terraform-azure Further IaC with documentation tool for more detail, please check: Cloud Native Taiwan User Group meetup #65 slide Ref https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac https://about.gitlab.com/topics/gitops/ https://developer.hashicorp.com/terraform/language/modules https://developer.hashicorp.com/terraform/language/tests https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/teams?view=azure-devops'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-07-26T22:38:40+08:00"><meta property="article:modified_time" content="2025-07-26T22:38:40+08:00"><meta property="article:tag" content="Continuous Integration"><meta property="article:tag" content="Continuous Deployment"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="SRE"><meta property="article:tag" content="IaC"><meta name=twitter:card content="summary"><meta name=twitter:title content="Terraform, Infrastructure as Code management tool"><meta name=twitter:description content='IaC Concept fast deployment for business requirement infrastructure consistency security compliance automation Azure cloud infra architecture overview https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/aks-microservices/aks-microservices Proposed GitOps flow change request stakeholder notification, plan IaC modularization for reusable purpose version control, branch: main, dev, new_net, new_db, stg, prd, … automating testing continuous deployment update process to related notificatition channel HCL Code example variable "aks_node_pool" { description = "" type = map(object({ vm_size = string node_count = number zones = list(string) os_disk_size_gb = number os_disk_type = string })) default = { "mqpool" : { vm_size = "Standard_DS4_v2", node_count = 6, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbcorepool" : { vm_size = "Standard_DS3_v2", node_count = 3, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbrepool" : { vm_size = "Standard_DS3_v2", node_count = 25, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbtranspool" : { vm_size = "Standard_DS3_v2", node_count = 12, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } "tbjspool" : { vm_size = "Standard_DS2_v2", node_count = 6, zones = ["1", "2"], os_disk_size_gb = 64, os_disk_type = "Ephemeral" } } } module "aks" { source = "../../modules/azure/kubernetes" resource_group = var.resource_group location = var.location vnet_app_name = local.vnet_app_name subnet_aks_name = var.subnet_aks_name aks_name = local.aks_name aks_namespace_admin_group_object_ids = var.aks_namespace_admin_group_object_ids aks_admin_group_object_ids = var.aks_admin_group_object_ids apg_id = module.apg.apg_id acr_id = module.acr.acr_id aks_tags = var.aks_tags aks_default_node_pool = var.aks_default_node_pool aks_node_pool = var.aks_node_pool vnet_depends_on = [ module.network.vnet_app_name, module.apg.apg_id, module.acr.acr_id ] } for more detail, please check: https://github.com/chienfuchen32/terraform-azure Further IaC with documentation tool for more detail, please check: Cloud Native Taiwan User Group meetup #65 slide Ref https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac https://about.gitlab.com/topics/gitops/ https://developer.hashicorp.com/terraform/language/modules https://developer.hashicorp.com/terraform/language/tests https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/teams?view=azure-devops'><title>Terraform, Infrastructure as Code management tool · Posts · Jeff’s note</title><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-96x96.png rel=icon sizes=96x96 type=image/png><link href=/favicon.ico rel="shortcut icon"><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/web-app-manifest-192x192.png rel=icon type=image/png><link href=/web-app-manifest-512x512.png rel=icon type=image/png><link href=/site.webmanifest rel=manifest><link crossorigin=anonymous href=/css/paige/paige.f3e98033a2d397f565d7f4b0dcf691c98eb69acb.min.3b5b583ef4a5c7e93743e15582585c9c2a7621b8fef6c9c7ad4bac50e4781f05.css integrity="sha256-O1tYPvSlx+k3Q+FVglhcnCp2Ibj+9snHrUusUOR4HwU=" referrerpolicy=no-referrer rel=stylesheet><link crossorigin=anonymous href=/css/paige/bootstrap/paige.37b3fc66686a7163af8180c5fb0fc6ab835321eb.min.55516fbe90a5aad46d6dbc2441c1c193504ee32cb1eef5070ab589c776231a4c.css integrity="sha256-VVFvvpClqtRtbbwkQcHBk1BO4yyx7vUHCrWJx3YjGkw=" referrerpolicy=no-referrer rel=stylesheet><link crossorigin=anonymous href=/css/paige/bootstrap-icons/bootstrap-icons.min.755bbaf60ab33d8f6213c74d33daea2ef5bf22d15245142a27529f8c1d7e80f1.css integrity="sha256-dVu69gqzPY9iE8dNM9rqLvW/ItFSRRQqJ1KfjB1+gPE=" referrerpolicy=no-referrer rel=stylesheet></head><body><div class=container><div class=row><div class="col mt-3" id=paige-site><header id=paige-site-header><div class="display-1 fw-bold text-center" id=paige-site-title><a class="text-body text-decoration-none" href=/>Jeff&rsquo;s note</a></div><nav aria-label=Menu class=paige-row-tall id=paige-site-menu><ul class="align-items-center justify-content-center nav"><li class=nav-item><a class="nav-link text-decoration-underline" href=/about/>About</a></li><li class=nav-item><a aria-current=page class="active fw-bold text-body nav-link text-decoration-underline" href=/posts/>Posts</a></li><li class=nav-item><a class="nav-link text-decoration-underline" href=/tags/>Tags</a></li></ul></nav><nav aria-label=Breadcrumbs class=paige-row-tall id=paige-site-breadcrumbs><div class="d-flex justify-content-center"><ol class="breadcrumb mb-0"><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/posts/>Posts</a></li></ol></div></nav></header><article class="align-items-center d-flex flex-column paige-kind-page paige-status-draft paige-status-unpublished" id=paige-page><header class="mw-100 text-center" id=paige-page-header><h1 class=fw-bold id=paige-page-title>Terraform, Infrastructure as Code management tool</h1><div><p class="paige-row-short text-secondary" id=paige-page-keywords><a class="link-secondary paige-page-keyword-tag" href=/tags/continuous-deployment/>Continuous Deployment</a>
·
<a class="link-secondary paige-page-keyword-tag" href=/tags/continuous-integration/>Continuous Integration</a>
·
<a class="link-secondary paige-page-keyword-tag" href=/tags/devops/>DevOps</a>
·
<a class="link-secondary paige-page-keyword-tag" href=/tags/iac/>IaC</a>
·
<a class="link-secondary paige-page-keyword-tag" href=/tags/sre/>SRE</a></p><p class="paige-row-short text-secondary" id=paige-page-date><time datetime=2025-07-26>July 26, 2025</time></p><p class="paige-row-short text-secondary" id=paige-page-word-count>264 words</p><p class="paige-row-short text-secondary" id=paige-page-reading-time>2 minutes</p></div><div class="align-items-center d-flex flex-column paige-row-tall text-start" id=paige-page-toc><div class="border rounded" style="padding:1rem 2rem 0 1rem"><nav id=TableOfContents><ul><li><a href=#azure-cloud-infra-architecture-overview>Azure cloud infra architecture overview</a></li><li><a href=#proposed-gitops-flow>Proposed GitOps flow</a><ul><li><a href=#hcl-code-example>HCL Code example</a></li><li><a href=#further-iac-with-documentation-tool>Further IaC with documentation tool</a></li></ul></li><li><a href=#ref>Ref</a></li></ul></nav></div></div></header><main class=mw-100 id=paige-page-content><h1 class=h4 id=iac-concept><a href=#iac-concept style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>IaC Concept</a></h1><ul><li>fast deployment for business requirement</li><li>infrastructure consistency</li><li>security compliance automation</li></ul><h2 class=h5 id=azure-cloud-infra-architecture-overview><a href=#azure-cloud-infra-architecture-overview style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>Azure cloud infra architecture overview</a></h2><img src=/azure/microservices-architecture.svg width=800><p><a href=https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/aks-microservices/aks-microservices rel=external>https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/aks-microservices/aks-microservices</a></p><h2 class=h5 id=proposed-gitops-flow><a href=#proposed-gitops-flow style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>Proposed GitOps flow</a></h2><ul><li>change request</li><li>stakeholder notification, plan</li><li>IaC modularization for reusable purpose</li><li>version control, branch: <code>main</code>, <code>dev</code>, <code>new_net</code>, <code>new_db</code>, <code>stg</code>, <code>prd</code>, &mldr;</li><li>automating testing</li><li>continuous deployment</li><li>update process to related notificatition channel</li></ul><h3 class=h6 id=hcl-code-example><a href=#hcl-code-example style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>HCL Code example</a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#00f>variable</span> <span style=color:#a31515>&#34;aks_node_pool&#34;</span> {
</span></span><span style=display:flex><span>  description = <span style=color:#a31515>&#34;&#34;</span>
</span></span><span style=display:flex><span>  type = <span style=color:#00f>map</span>(<span style=color:#00f>object</span>({
</span></span><span style=display:flex><span>    vm_size         = <span style=color:#00f>string</span>
</span></span><span style=display:flex><span>    node_count      = <span style=color:#00f>number</span>
</span></span><span style=display:flex><span>    zones           = <span style=color:#00f>list</span>(<span style=color:#00f>string</span>)
</span></span><span style=display:flex><span>    os_disk_size_gb = <span style=color:#00f>number</span>
</span></span><span style=display:flex><span>    os_disk_type    = <span style=color:#00f>string</span>
</span></span><span style=display:flex><span>  }))
</span></span><span style=display:flex><span>  default = {
</span></span><span style=display:flex><span>    &#34;mqpool&#34; : { vm_size = &#34;Standard_DS4_v2&#34;, node_count = 6, zones = [&#34;1&#34;, &#34;2&#34;], os_disk_size_gb = 64, os_disk_type = <span style=color:#a31515>&#34;Ephemeral&#34;</span> }
</span></span><span style=display:flex><span>    &#34;tbcorepool&#34; : { vm_size = &#34;Standard_DS3_v2&#34;, node_count = 3, zones = [&#34;1&#34;, &#34;2&#34;], os_disk_size_gb = 64, os_disk_type = <span style=color:#a31515>&#34;Ephemeral&#34;</span> }
</span></span><span style=display:flex><span>    &#34;tbrepool&#34; : { vm_size = &#34;Standard_DS3_v2&#34;, node_count = 25, zones = [&#34;1&#34;, &#34;2&#34;], os_disk_size_gb = 64, os_disk_type = <span style=color:#a31515>&#34;Ephemeral&#34;</span> }
</span></span><span style=display:flex><span>    &#34;tbtranspool&#34; : { vm_size = &#34;Standard_DS3_v2&#34;, node_count = 12, zones = [&#34;1&#34;, &#34;2&#34;], os_disk_size_gb = 64, os_disk_type = <span style=color:#a31515>&#34;Ephemeral&#34;</span> }
</span></span><span style=display:flex><span>    &#34;tbjspool&#34; : { vm_size = &#34;Standard_DS2_v2&#34;, node_count = 6, zones = [&#34;1&#34;, &#34;2&#34;], os_disk_size_gb = 64, os_disk_type = <span style=color:#a31515>&#34;Ephemeral&#34;</span> }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#00f>module</span> <span style=color:#a31515>&#34;aks&#34;</span> {
</span></span><span style=display:flex><span>  source                               = <span style=color:#a31515>&#34;../../modules/azure/kubernetes&#34;</span>
</span></span><span style=display:flex><span>  resource_group                       = <span style=color:#00f>var</span>.<span style=color:#00f>resource_group</span>
</span></span><span style=display:flex><span>  location                             = <span style=color:#00f>var</span>.<span style=color:#00f>location</span>
</span></span><span style=display:flex><span>  vnet_app_name                        = <span style=color:#00f>local</span>.<span style=color:#00f>vnet_app_name</span>
</span></span><span style=display:flex><span>  subnet_aks_name                      = <span style=color:#00f>var</span>.<span style=color:#00f>subnet_aks_name</span>
</span></span><span style=display:flex><span>  aks_name                             = <span style=color:#00f>local</span>.<span style=color:#00f>aks_name</span>
</span></span><span style=display:flex><span>  aks_namespace_admin_group_object_ids = <span style=color:#00f>var</span>.<span style=color:#00f>aks_namespace_admin_group_object_ids</span>
</span></span><span style=display:flex><span>  aks_admin_group_object_ids           = <span style=color:#00f>var</span>.<span style=color:#00f>aks_admin_group_object_ids</span>
</span></span><span style=display:flex><span>  apg_id                               = <span style=color:#00f>module</span>.<span style=color:#00f>apg</span>.<span style=color:#00f>apg_id</span>
</span></span><span style=display:flex><span>  acr_id                               = <span style=color:#00f>module</span>.<span style=color:#00f>acr</span>.<span style=color:#00f>acr_id</span>
</span></span><span style=display:flex><span>  aks_tags                             = <span style=color:#00f>var</span>.<span style=color:#00f>aks_tags</span>
</span></span><span style=display:flex><span>  aks_default_node_pool                = <span style=color:#00f>var</span>.<span style=color:#00f>aks_default_node_pool</span>
</span></span><span style=display:flex><span>  aks_node_pool                        = <span style=color:#00f>var</span>.<span style=color:#00f>aks_node_pool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vnet_depends_on = [
</span></span><span style=display:flex><span>    <span style=color:#00f>module</span>.<span style=color:#00f>network</span>.<span style=color:#00f>vnet_app_name</span>,
</span></span><span style=display:flex><span>    <span style=color:#00f>module</span>.<span style=color:#00f>apg</span>.<span style=color:#00f>apg_id</span>,
</span></span><span style=display:flex><span>    <span style=color:#00f>module</span>.<span style=color:#00f>acr</span>.<span style=color:#00f>acr_id</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>for more detail, please check: <a href=https://github.com/chienfuchen32/terraform-azure rel=external>https://github.com/chienfuchen32/terraform-azure</a></li></ul><h3 class=h6 id=further-iac-with-documentation-tool><a href=#further-iac-with-documentation-tool style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>Further IaC with documentation tool</a></h3><img src=/terraform/terraformproviderdevelopment-250116151500-84e30bd1.pdf width=800><ul><li>for more detail, please check: <a href=/terraform/terraformproviderdevelopment-250116151500-84e30bd1.pdf>Cloud Native Taiwan User Group meetup #65 slide</a></li></ul><h2 class=h5 id=ref><a href=#ref style=color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity));text-decoration:none>Ref</a></h2><ul><li><a href=https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac rel=external>https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac</a></li><li><a href=https://about.gitlab.com/topics/gitops/ rel=external>https://about.gitlab.com/topics/gitops/</a></li><li><a href=https://developer.hashicorp.com/terraform/language/modules rel=external>https://developer.hashicorp.com/terraform/language/modules</a></li><li><a href=https://developer.hashicorp.com/terraform/language/tests rel=external>https://developer.hashicorp.com/terraform/language/tests</a></li><li><a href="https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/teams?view=azure-devops" rel=external>https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/teams?view=azure-devops</a></li></ul></main><footer class=mw-100 id=paige-page-footer><div id=paige-page-siblings><div class="paige-row-short text-center text-secondary" id=paige-page-next><a class=link-secondary href=https://chienfuchen32.github.io/posts/thingsboard-performance-test/>Thingsboard Performance Test</a> &#8250;</div></div></footer></article><footer id=paige-site-footer><p class="paige-row-short text-center text-secondary" id=paige-site-credit><a class="link-secondary text-decoration-none" href=https://github.com/willfaught/paige>Paige Theme</a></p></footer></div></div></div><script crossorigin=anonymous defer integrity="sha256-GdpV5fXTSprZ1he71RUKGZl0E3HtqxFXvbylEdkWmRQ=" referrerpolicy=no-referrer src=/js/paige/bootstrap/bootstrap.bundle.min.19da55e5f5d34a9ad9d617bbd5150a1999741371edab1157bdbca511d9169914.js></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","abstract":" IaC Concept fast deployment for business requirement infrastructure consistency security compliance automation Azure cloud infra architecture overview https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/containers/aks-microservices/aks-microservices Proposed GitOps flow change request stakeholder notification, plan IaC modularization for reusable purpose version control, branch: main, dev, new_net, new_db, stg, prd, … automating testing continuous deployment update process to related notificatition channel HCL Code example variable \"aks_node_pool\" { description = \"\" type = map(object({ vm_size = string node_count = number zones = list(string) os_disk_size_gb = number os_disk_type = string })) default = { \"mqpool\" : { vm_size = \"Standard_DS4_v2\", node_count = 6, zones = [\"1\", \"2\"], os_disk_size_gb = 64, os_disk_type = \"Ephemeral\" } \"tbcorepool\" : { vm_size = \"Standard_DS3_v2\", node_count = 3, zones = [\"1\", \"2\"], os_disk_size_gb = 64, os_disk_type = \"Ephemeral\" } \"tbrepool\" : { vm_size = \"Standard_DS3_v2\", node_count = 25, zones = [\"1\", \"2\"], os_disk_size_gb = 64, os_disk_type = \"Ephemeral\" } \"tbtranspool\" : { vm_size = \"Standard_DS3_v2\", node_count = 12, zones = [\"1\", \"2\"], os_disk_size_gb = 64, os_disk_type = \"Ephemeral\" } \"tbjspool\" : { vm_size = \"Standard_DS2_v2\", node_count = 6, zones = [\"1\", \"2\"], os_disk_size_gb = 64, os_disk_type = \"Ephemeral\" } } } module \"aks\" { source = \"../../modules/azure/kubernetes\" resource_group = var.resource_group location = var.location vnet_app_name = local.vnet_app_name subnet_aks_name = var.subnet_aks_name aks_name = local.aks_name aks_namespace_admin_group_object_ids = var.aks_namespace_admin_group_object_ids aks_admin_group_object_ids = var.aks_admin_group_object_ids apg_id = module.apg.apg_id acr_id = module.acr.acr_id aks_tags = var.aks_tags aks_default_node_pool = var.aks_default_node_pool aks_node_pool = var.aks_node_pool vnet_depends_on = [ module.network.vnet_app_name, module.apg.apg_id, module.acr.acr_id ] } for more detail, please check: https://github.com/chienfuchen32/terraform-azure Further IaC with documentation tool for more detail, please check: Cloud Native Taiwan User Group meetup #65 slide Ref https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac https://about.gitlab.com/topics/gitops/ https://developer.hashicorp.com/terraform/language/modules https://developer.hashicorp.com/terraform/language/tests https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/teams?view=azure-devops ","articleSection":"Posts","dateCreated":"2025-07-26T22:38:40+08:00","dateModified":"2025-07-26T22:38:40+08:00","headline":"Terraform, Infrastructure as Code management tool","inLanguage":"en-us","keywords":"Continuous Deployment, Continuous Integration, DevOps, IaC, SRE","name":"Terraform, Infrastructure as Code management tool","timeRequired":"PT2M","url":"https://chienfuchen32.github.io/posts/infrastructure-as-code/","wordCount":264}</script><noscript>JavaScript is required</noscript></body></html>